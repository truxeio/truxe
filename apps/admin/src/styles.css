@import 'tailwindcss/base';
@import 'tailwindcss/components';
@import 'tailwindcss/utilities';

/* Base styles for accessibility */
@layer base {
  /* Screen reader only utility */
  .sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border: 0;
  }

  /* Focus visible for better keyboard navigation */
  .focus-visible {
    outline: 2px solid theme('colors.primary.500');
    outline-offset: 2px;
  }

  /* High contrast mode support */
  @media (prefers-contrast: high) {
    .high-contrast-border {
      border-width: 2px;
    }
    
    .high-contrast-text {
      font-weight: 600;
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    .motion-reduce {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
    
    * {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
      scroll-behavior: auto !important;
    }
  }

  /* Dark theme support */
  .theme-dark {
    color-scheme: dark;
  }

  .theme-default {
    color-scheme: light;
  }

  /* High contrast theme */
  .theme-high-contrast {
    --color-primary: #0000ff;
    --color-secondary: #000000;
    --color-success: #008000;
    --color-warning: #ffff00;
    --color-error: #ff0000;
  }

  /* Custom CSS properties for theming */
  :root {
    --font-family: 'Inter', ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, 'Noto Sans', sans-serif;
    --border-radius: 0.5rem;
    
    /* Animation durations */
    --duration-fast: 150ms;
    --duration-normal: 300ms;
    --duration-slow: 500ms;
    
    /* Z-index layers */
    --z-dropdown: 1000;
    --z-sticky: 1020;
    --z-fixed: 1030;
    --z-modal-backdrop: 1040;
    --z-modal: 1050;
    --z-popover: 1060;
    --z-tooltip: 1070;
    --z-toast: 1080;
  }
}

/* Component styles */
@layer components {
  /* Focus ring utility */
  .focus-ring {
    @apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2;
  }

  .focus-ring-inset {
    @apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-inset;
  }

  /* Button focus styles for accessibility */
  .btn-focus {
    @apply focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500;
  }

  /* Input focus styles */
  .input-focus {
    @apply focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500;
  }

  /* Card component */
  .card {
    @apply bg-white rounded-lg border border-secondary-200 shadow-sm;
    @apply dark:bg-secondary-800 dark:border-secondary-700;
  }

  /* Skeleton loading animation */
  .skeleton {
    @apply animate-pulse bg-secondary-300 dark:bg-secondary-600;
  }

  /* Toast animations */
  .toast-enter {
    @apply transform translate-x-full opacity-0;
  }

  .toast-enter-active {
    @apply transform translate-x-0 opacity-100 transition-all duration-300 ease-in-out;
  }

  .toast-exit {
    @apply transform translate-x-0 opacity-100;
  }

  .toast-exit-active {
    @apply transform translate-x-full opacity-0 transition-all duration-300 ease-in-out;
  }

  /* Modal animations */
  .modal-backdrop-enter {
    @apply opacity-0;
  }

  .modal-backdrop-enter-active {
    @apply opacity-100 transition-opacity duration-300 ease-out;
  }

  .modal-backdrop-exit {
    @apply opacity-100;
  }

  .modal-backdrop-exit-active {
    @apply opacity-0 transition-opacity duration-200 ease-in;
  }

  .modal-content-enter {
    @apply opacity-0 scale-95;
  }

  .modal-content-enter-active {
    @apply opacity-100 scale-100 transition-all duration-300 ease-out;
  }

  .modal-content-exit {
    @apply opacity-100 scale-100;
  }

  .modal-content-exit-active {
    @apply opacity-0 scale-95 transition-all duration-200 ease-in;
  }

  /* Dropdown animations */
  .dropdown-enter {
    @apply opacity-0 scale-95;
  }

  .dropdown-enter-active {
    @apply opacity-100 scale-100 transition-all duration-200 ease-out;
  }

  .dropdown-exit {
    @apply opacity-100 scale-100;
  }

  .dropdown-exit-active {
    @apply opacity-0 scale-95 transition-all duration-150 ease-in;
  }
}

/* Utility classes */
@layer utilities {
  /* Text truncation utilities */
  .truncate-2 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
  }

  .truncate-3 {
    overflow: hidden;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
  }

  /* Scrollbar utilities */
  .scrollbar-thin {
    scrollbar-width: thin;
  }

  .scrollbar-none {
    scrollbar-width: none;
    -ms-overflow-style: none;
  }

  .scrollbar-none::-webkit-scrollbar {
    display: none;
  }

  /* Safe area utilities for mobile */
  .safe-top {
    padding-top: env(safe-area-inset-top);
  }

  .safe-bottom {
    padding-bottom: env(safe-area-inset-bottom);
  }

  .safe-left {
    padding-left: env(safe-area-inset-left);
  }

  .safe-right {
    padding-right: env(safe-area-inset-right);
  }

  /* Accessibility utilities */
  .skip-link {
    @apply absolute -top-10 left-6 z-50 bg-primary-600 text-white px-4 py-2 rounded-md;
    @apply focus:top-6 transition-all duration-200;
  }

  /* High contrast utilities */
  .high-contrast\:border-2 {
    @media (prefers-contrast: high) {
      border-width: 2px;
    }
  }

  .high-contrast\:font-bold {
    @media (prefers-contrast: high) {
      font-weight: 700;
    }
  }

  /* Motion utilities */
  .motion-safe\:animate-spin {
    @media (prefers-reduced-motion: no-preference) {
      animation: spin 1s linear infinite;
    }
  }

  .motion-safe\:animate-pulse {
    @media (prefers-reduced-motion: no-preference) {
      animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
    }
  }

  /* Print utilities */
  @media print {
    .print\:hidden {
      display: none;
    }

    .print\:text-black {
      color: #000 !important;
    }

    .print\:bg-white {
      background-color: #fff !important;
    }
  }
}
